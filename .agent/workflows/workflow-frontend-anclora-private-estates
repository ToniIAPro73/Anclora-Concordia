# Antigravity — Workflow Frontend (Workspace: Anclora Private Estates)

Este workflow extiende el workflow global frontend y fija criterios específicos de UI/UX, theming y estructura para apps Private Estates (marketing + apps internas).

---

## 0) Regla de oro (Private Estates)

La UI debe comunicar **lujo + claridad**.  
Si hay conflicto entre “estética” y “legibilidad / a11y”, gana legibilidad.

---

## 1) Fase 1 — Análisis UI/UX (obligatorio)

Para cada pantalla:
- Objetivo (qué decisión/acción toma el usuario)
- Componentes Antigravity reutilizables
- Estados: loading / empty / error / success / disabled / read-only
- Responsive: mobile/tablet/desktop
- Copy: CTA explícito (ver reglas de workspace)

Salida:
- Lista de componentes (atoms/molecules/organisms)
- Definición de props/state por componente

---

## 2) Fase 2 — Estrategia de componentes y layout de marca

Obligatorio:
- Importar tokens del workspace (no redefinir variables por app).
- Hero + Footer coherentes con `base_layout_private_estates.html`.

Composición recomendada:
- `components/` (UI reutilizable)
- `features/` (dominio: leads, properties, documents)
- `hooks/` (data + side effects)
- `services/api/` (fetchers)
- `types/` (DTOs)
- `styles/tokens.css` (o paquete compartido)

---

## 3) Fase 3 — Implementación (React + TS)

Reglas:
- TypeScript estricto (evitar `any`).
- Separación lógica/presentación:
  - Presentational components: puros, sin side-effects
  - Logic: hooks (React Query si existe) / services
- Accesibilidad:
  - labels visibles en forms
  - focus ring consistente
  - aria-label en icon-only

Theming:
- Dark mode por defecto, soportar light si se requiere.
- No hardcode de colores; usar tokens.

---

## 4) Integración con APIs (patrones)

- Server state: preferible React Query/SWR (si está en stack).
- Normalizar errores:
  - mapear estructura de error backend a toasts/form errors.
- Paginación, filtros y sorting:
  - estado en URL cuando tenga sentido (shareable).
- Debounce para búsquedas (300–500ms).

---

## 5) Formularios (leads / contacto / onboarding inversor)

- Validación consistente (recomendado: onBlur en público).
- Mensajes de error accionables.
- Loading states: botón con spinner, ancho estable.
- Submit:
  - éxito: toast + redirección/confirmación clara
  - error: toast + errores campo a campo cuando proceda

---

## 6) Visual QA

Checklist:
- Contraste AA mínimo (ideal AAA para body).
- Hover/active/focus no cambian layout.
- Mobile: menú usable + modales con focus trap + scroll bloqueado.
- Tipografía:
  - Cardo para titulares
  - Inter para body
  - Fraunces solo acentos

---

## 7) Testing

- Unit: helpers y hooks puros.
- Integration: formularios y tablas (filtrado, paginación).
- E2E: lead capture y navegación principal.

---

## 8) Checklist (antes de merge)

- Tokens correctos importados.
- Hero/Footer presentes y coherentes.
- Estados (loading/empty/error) implementados.
- a11y: Tab order + focus visible + aria labels.
- Copy: CTA explícito; sin labels genéricas.
